<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>GreenCare - Dashboard</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="chatbot.css">
</head>
<body>
    <header>
        <div style="display: flex; align-items: center; gap: 15px;">
            <a href="/app/landing.html" class="home-btn" title="Retour √† l'accueil">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                    <polyline points="9 22 9 12 15 12 15 22"></polyline>
                </svg>
            </a>
            <img src="images/greencare-logo.png" alt="GreenCare" style="height: 45px;">
        </div>
        <nav>
            <a href="index.html">Actions</a>
            <a href="propose.html">Proposer</a>
            <a href="news.html">Actualit√©s</a>
            <a href="dashboard.html">Impact</a>
        </nav>
    </header>

    <div class="container">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom: 1.5rem;">
            <h2 style="margin: 0;">Tableau de Bord d'Impact</h2>
            <button onclick="downloadCSV()" style="font-size:0.95em; padding: 10px 20px;">üì• Exporter CSV</button>
        </div>
        <p style="color: var(--text); opacity: 0.8; margin-bottom: 2rem;">Indicateurs temps r√©el (Actions score > 0)</p>
        
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 20px; margin-bottom: 2rem;">
            <div class="card" style="text-align:center; padding: 30px 20px;">
                <h3 style="font-size: 1em; margin-bottom: 15px; opacity: 0.8;">‚ö° √ânergie √âconomis√©e</h3>
                <div class="score" id="kpi-kwh" style="font-size: 2.5em; margin: 10px 0;">--</div>
                <small style="font-weight: 600; color: var(--primary);">kWh / an</small>
            </div>
            <div class="card" style="text-align:center; padding: 30px 20px;">
                <h3 style="font-size: 1em; margin-bottom: 15px; opacity: 0.8;">üí∞ √âconomies</h3>
                <div class="score" id="kpi-euro" style="font-size: 2.5em; margin: 10px 0;">--</div>
                <small style="font-weight: 600; color: var(--primary);">Euros / an</small>
            </div>
            <div class="card" style="text-align:center; padding: 30px 20px;">
                <h3 style="font-size: 1em; margin-bottom: 15px; opacity: 0.8;">üåç CO2 √âvit√©</h3>
                <div class="score" id="kpi-co2" style="font-size: 2.5em; margin: 10px 0;">--</div>
                <small style="font-weight: 600; color: var(--primary);">kg CO2e / an</small>
            </div>
        </div>
        
        <div class="card" style="text-align:center; padding: 30px 20px;">
            <h3 style="font-size: 1.1em; margin-bottom: 10px;">‚úÖ Actions Qualifi√©es</h3>
            <p style="opacity: 0.7; margin-bottom: 20px;">Nombre d'initiatives RSE retenues par la communaut√©.</p>
            <div class="score" id="kpi-count" style="font-size: 3em; margin: 10px 0;">--</div>
        </div>
    </div>
    
    <!-- Chatbot Vert -->
    <div class="chatbot-container">
        <button class="chatbot-toggle" id="chatbotToggle" onclick="toggleChatbot()">üå±</button>
        <div class="chatbot-window" id="chatbotWindow">
            <div class="chatbot-header">
                <div class="chatbot-avatar">üå±</div>
                <div class="chatbot-info">
                    <h3>Vert</h3>
                    <p>Assistant RSE</p>
                </div>
            </div>
            <div class="chatbot-messages" id="chatMessages"></div>
            <div class="chatbot-suggestions" id="chatSuggestions"></div>
            <div class="chatbot-input">
                <input type="text" id="chatInput" placeholder="Posez votre question...">
                <button class="chatbot-send" onclick="handleUserInput()">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M2 3l16 7-16 7V3zm2 10l8-3-8-3v6z"/>
                    </svg>
                </button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    <script src="chatbot.js"></script>
    <script>
        loadDashboard();
        initChatbot();
    </script>
</body>
</html>
